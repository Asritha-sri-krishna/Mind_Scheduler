<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mood App with Login/Signup</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
  
         /* Base and Dark Theme Styles */
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      margin: 0;
      background-color: #f8f9fa;
      color: #212529;
      transition: background-color 0.3s ease, color 0.3s ease;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    body.dark-mode {
      background-color: #121212;
      color: #e0e0e0;
    }
    .dark-mode .card {
      background-color: #1e1e1e;
      color: #e0e0e0;
      border-color: #333;
    }
    .dark-mode .form-control {
      background-color: #2c2c2c !important;
      color: #e0e0e0 !important;
      border: 1px solid #444 !important;
    }
    .dark-mode .form-control:focus {
      border-color: #888 !important;
      box-shadow: 0 0 0 0.2rem rgba(108, 117, 125, 0.25) !important;
      background-color: #2c2c2c !important;
      color: #e0e0e0 !important;
    }
    .dark-mode .btn-primary {
      background-color: #2563eb !important;
      border-color: #2563eb !important;
    }
    .dark-mode .btn-primary:hover {
      background-color: #1d4ed8 !important;
      border-color: #1d4ed8 !important;
    }
    .dark-mode .btn-outline-secondary {
      color: #e0e0e0 !important;
      border-color: #444 !important;
    }
    .dark-mode .btn-outline-secondary:hover {
      background-color: #333 !important;
    }
    .dark-mode .navbar-light {
      background-color: #222 !important;
    }
    .dark-mode .navbar-light .navbar-brand,
    .dark-mode .navbar-light .nav-link {
      color: #e0e0e0 !important;
    }
    .dark-mode #taskList .list-group-item {
      background-color: #2c2c2c;
      border: 1px solid #444;
      color: #e0e0e0;
    }
    .dark-mode .list-group-item:hover {
      background-color: #3a3a3a;
    }

    /* Layout */
    .hidden { display: none !important; }
    .d-none { display: none !important; }
    .rounded-custom {
      border-radius: 15px;
    }
    .rounded-custom-input {
      border-radius: 10px !important;
    }
    .rounded-custom-btn {
      border-radius: 10px;
      padding: 12px;
      font-weight: bold;
      transition: all 0.3s ease;
      user-select: none;
    }
    .rounded-custom-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
    }
    .rounded-custom-btn:active {
      transform: translateY(-1px);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
    }
    .shadow-custom {
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
    }
    .calendar-day {
      padding: 14px 10px;
      text-align: center;
      border: 1px solid #ddd;
      cursor: pointer;
      border-radius: 10px;
      font-weight: 600;
      user-select: none;
      transition: background-color 0.3s, box-shadow 0.2s;
    }
    .calendar-day.happy {
      background-color: #d4edda;
      border-color: #4caf50;
      box-shadow: 0 0 8px #4caf5022;
    }
    .calendar-day.sad {
      background-color: #f8d7da;
      border-color: #f44336;
      box-shadow: 0 0 8px #f4433622;
    }
    .calendar-day.neutral {
      background-color: #fff3cd;
      border-color: #ffeb3b;
      box-shadow: 0 0 8px #ffeb3b22;
    }
    .calendar-day:hover {
      background-color: #e9ecef;
    }
    .list-group-item {
      border-radius: 10px;
      margin-bottom: 8px;
      transition: background-color 0.3s, box-shadow 0.2s;
      font-weight: 500;
      user-select: none;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: default;
    }
    .list-group-item:hover {
      background-color: #f1f3f5;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    }
    body.dark-mode .list-group-item:hover {
      background-color: #333333;
      box-shadow: 0 2px 8px rgba(255,255,255,0.07);
    }
    .completed {
      text-decoration: line-through;
      color: #6c757d !important;
    }
    .btn {
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }
    .btn:active {
      transform: translateY(-1px);
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
    }
    .view {
      opacity: 1;
      transition: opacity 0.4s ease;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }
    .view.hidden {
      opacity: 0;
      pointer-events: none;
      height: 0;
      overflow: hidden;
      transition: opacity 0.3s ease, height 0.3s ease;
      flex-grow: 0;
    }
    .chart-container {
      position: relative;
      height: 400px;
      width: 100%;
    }
    .mood-badge {
      font-weight: 600;
      border-radius: 10px;
      padding: 3px 10px;
      margin-left: 8px;
      user-select: none;
      white-space: nowrap;
    }
    .mood-light {
      background-color: #d0ebff;
      color: #1c7ed6;
    }
    .mood-dark {
      background-color: #343a40;
      color: #adb5bd;
    }
    /* Navbar overrides */
    .navbar-light {
      background-color: #f8f9fa !important;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    .navbar-light .navbar-brand,
    .navbar-light .nav-link {
      color: #212529 !important;
      cursor: pointer;
      user-select: none;
    }
    .dark-mode .navbar-light {
      background-color: #222 !important;
    }
    .dark-mode .navbar-light .navbar-brand,
    .dark-mode .navbar-light .nav-link {
      color: #e0e0e0 !important;
    }
    /* Input group select width fix */
    #taskMoodSelect {
      max-width: 120px;
      border-radius: 10px !important;
    }
    /* Responsive tweaks */
    @media (max-width: 576px) {
      .input-group > .form-control,
      .input-group > .form-select,
      .input-group > .btn {
        flex: 1 1 100% !important;
        margin-bottom: 10px;
      }

      .input-group {
        flex-direction: column;
      }
    }
  
</style>
</head>
  <style>
  body.light-theme {
    background-color: #ffffff;
    color: #000000;
  }

  body.dark-theme {
    background-color: #121212;
    color: #ffffff;
  }

  .theme-toggle {
    position: fixed;
    top: 10px;
    right: 10px;
    font-size: 1.5rem;
    background: none;
    border: none;
    cursor: pointer;
  }

  input, button, textarea {
    background-color: inherit;
    color: inherit;
    border: 1px solid currentColor;
  }
</style>
<body>
   <button class="theme-toggle" id="themeToggleBtn" onclick="toggleTheme()">ðŸŒž</button>

  <!-- Navbar (Visible after login) -->
  <nav id="mainNav" class="navbar navbar-expand-lg navbar-light bg-light d-none mb-4 rounded-custom shadow-custom">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Mind Scheduler</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="#" onclick="showView('dashboard')">Dashboard</a></li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="showView('moodCalendar')">Mood Calendar</a></li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="showView('taskNoter')">Task Noter</a></li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="showView('smsSender')">SMS Reminders</a></li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="showView('moodAnalytics')">Mood Analytics</a></li>
        </ul>
        <button class="btn btn-outline-danger" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</button>
      </div>
    </div>
  </nav>

  <!-- Auth View -->
  <div id="authView" class="container d-flex justify-content-center align-items-center vh-100 view">
    <div class="card p-4 shadow-custom rounded-custom" style="max-width: 450px; width: 100%;">
      <h3 class="text-center mb-4">Login / Sign Up</h3>
      <form id="loginForm" class="mb-4">
        <h5>Login</h5>
        <input type="email" id="loginEmail" placeholder="Email" class="form-control rounded-custom-input mb-2" required />
        <input type="password" id="loginPassword" placeholder="Password" class="form-control rounded-custom-input mb-3" required />
        <button type="submit" class="btn btn-primary w-100 rounded-custom-btn">Login</button>
      </form>

      <form id="signupForm">
        <h5>Sign Up</h5>
        <input type="email" id="signupEmail" placeholder="Email" class="form-control rounded-custom-input mb-2" required />
        <input type="password" id="signupPassword" placeholder="Password" class="form-control rounded-custom-input mb-3" required />
        <button type="submit" class="btn btn-success w-100 rounded-custom-btn">Sign Up</button>
      </form>
    </div>
  </div>
    
    <!-- Dashboard View -->
  <div id="dashboard" class="container mt-5 view hidden">
    <h2 class="text-center mb-4">Welcome, <span id="userEmailDisplay"></span>!</h2>
    <div class="row">
      <div class="col-md-6 mb-3">
        <div class="card shadow-custom rounded-custom h-100">
          <div class="card-body text-center d-flex flex-column justify-content-center">
            <h5>Mood Calender</h5>
            <button class="btn btn-primary rounded-custom-btn mt-3" onclick="showView('moodCalendar')">Go</button>
          </div>
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <div class="card shadow-custom rounded-custom h-100">
          <div class="card-body text-center d-flex flex-column justify-content-center">
            <h5>Task Noter</h5>
            <button class="btn btn-primary rounded-custom-btn mt-3" onclick="showView('taskNoter')">Go</button>
          </div>
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <div class="card shadow-custom rounded-custom h-100">
          <div class="card-body text-center d-flex flex-column justify-content-center">
            <h5>Mood Analytics</h5>
            <button class="btn btn-primary rounded-custom-btn mt-3" onclick="showView('moodAnalytics')">Go</button>
          </div>
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <div class="card shadow-custom rounded-custom h-100">
          <div class="card-body text-center d-flex flex-column justify-content-center">
            <h5>SMS Reminders</h5>
            <button class="btn btn-primary rounded-custom-btn mt-3" onclick="showView('smsSender')">Go</button>
          </div>
        </div>
      </div>
    </div>
  </div>

     

  <!-- Mood Calendar View -->
  <div id="moodCalendar" class="container mt-5 view hidden">
    <h2 class="text-center">Mood Calendar</h2>
    <div class="d-flex justify-content-between mb-3">
      <button class="btn btn-secondary rounded-custom-btn" onclick="prevMonth()">Previous</button>
      <h4 id="monthYear">October 2023</h4>
      <button class="btn btn-secondary rounded-custom-btn" onclick="nextMonth()">Next</button>
    </div>
    <div class="card shadow-custom rounded-custom p-3">
      <div id="calendar" class="calendar-grid"></div>
    </div>
  </div>

    <!-- Task Noter View -->
     <div id="taskNoter" class="container mt-5 view hidden d-flex flex-column">
    <h2 class="text-center mb-3">Task Noter</h2>
    <div class="card shadow-custom rounded-custom p-3 flex-grow-1 d-flex flex-column">
      <div class="input-group mb-3 flex-wrap">
        <input type="text" id="taskInput" class="form-control rounded-custom-input flex-grow-1 mb-2 mb-md-0 me-md-2" placeholder="Add a task" />
        <button class="btn btn-primary rounded-custom-btn flex-shrink-0" onclick="addTask()">Add</button>
      </div>
      <ul id="taskList" class="list-group flex-grow-1 overflow-auto"></ul>
      <button class="btn btn-link mt-3 align-self-center" onclick="viewPastTasks()">View Past Tasks</button>
    </div>
  </div>


   <!-- SMS Sender View -->
    <div id="smsSender" class="container mt-5 view hidden d-flex flex-column">
    <h2 class="text-center mb-4">SMS Reminders</h2>
    <div class="card shadow-custom rounded-custom p-4 mx-auto" style="max-width: 500px; width: 100%;">

      <!-- Meeting Reminder Form -->
      <div>
        <h5 class="mb-3">Schedule Meeting Reminder SMS</h5>
        <form id="reminderForm" novalidate autocomplete="off" spellcheck="false">
          <div class="mb-3">
            <label for="phoneInput" class="form-label">Recipient Phone Number</label>
            <input type="tel" id="phoneInput" class="form-control rounded-custom-input" placeholder="+912345678905" required />
          </div>
          <div class="mb-3">
            <label for="meetingTimeInput" class="form-label">Meeting Time (24h format)</label>
            <input type="time" id="meetingTimeInput" class="form-control rounded-custom-input" required />
          </div>
          <button type="submit" class="btn btn-success w-100 rounded-custom-btn">Schedule Meeting Reminder</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Mood Analytics View -->
  <div id="moodAnalytics" class="container mt-5 view hidden">
    <h2 class="text-center">Mood Analytics</h2>
    <div class="card shadow-custom rounded-custom p-3">
      <div class="chart-container">
        <canvas id="moodChart"></canvas>
      </div>
      <div class="chart-container mt-4">
        <canvas id="moodPieChart"></canvas>
      </div>
    </div>
  </div>
  
<script>
      
  function applyTheme(theme) {
    document.body.classList.remove('light-theme', 'dark-theme');
    document.body.classList.add(theme + '-theme');

    const toggleBtn = document.getElementById('themeToggleBtn');
    toggleBtn.textContent = theme === 'dark' ? 'ðŸŒ™' : 'ðŸŒž';

    localStorage.setItem('theme', theme);
  }

  function toggleTheme() {
    const currentTheme = localStorage.getItem('theme') || 'light';
    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
    applyTheme(newTheme);
  }

  document.addEventListener('DOMContentLoaded', () => {
    const savedTheme = localStorage.getItem('theme') || 'light';
    applyTheme(savedTheme);
  });

  // Utility: Simple SHA-256 hashing via SubtleCrypto (async)
  async function hashPassword(password) {
    const encoder = new TextEncoder();
    const data = encoder.encode(password);
    const hashBuffer = await crypto.subtle.digest('SHA-256', data);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
  }

  // Persistent State
  let currentUser = null;

  // Views
  function showView(viewId) {
    document.querySelectorAll('.view').forEach(v => v.classList.add('hidden'));
    document.getElementById(viewId).classList.remove('hidden');
  }

  function saveUsers(users) {
    localStorage.setItem('users', JSON.stringify(users));
  }

  function loadUsers() {
    return JSON.parse(localStorage.getItem('users')) || {};
  }

  function saveUserData(email, dataKey, dataValue) {
    const allData = JSON.parse(localStorage.getItem('userData') || '{}');
    allData[email] = allData[email] || {};
    allData[email][dataKey] = dataValue;
    localStorage.setItem('userData', JSON.stringify(allData));
  }

  function loadUserData(email, dataKey) {
    const allData = JSON.parse(localStorage.getItem('userData') || '{}');
    return allData[email] ? allData[email][dataKey] : null;
  }

  // Login
  document.getElementById('loginForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    const email = document.getElementById('loginEmail').value.trim().toLowerCase();
    const password = document.getElementById('loginPassword').value;

    const users = loadUsers();
    if (!users[email]) {
      alert('User does not exist. Please sign up first.');
      return;
    }
    const hashedPwd = await hashPassword(password);

    if (users[email].passwordHash === hashedPwd) {
      currentUser = email;
      onLoginSuccess();
    } else {
      alert('Invalid email or password.');
    }
  });

  // Signup
  document.getElementById('signupForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    const email = document.getElementById('signupEmail').value.trim().toLowerCase();
    const password = document.getElementById('signupPassword').value;
    if (!email || !password) {
      alert('Please enter both email and password.');
      return;
    }
    const users = loadUsers();
    if (users[email]) {
      alert('User already exists. Please log in.');
      return;
    }
    const hashedPwd = await hashPassword(password);
    users[email] = { passwordHash: hashedPwd };
    saveUsers(users);
    alert('Signup successful! You can now log in.');
    document.getElementById('signupForm').reset();
  });

  // On successful login
  function onLoginSuccess() {
    document.getElementById('authView').classList.add('hidden');
    document.getElementById('mainNav').classList.remove('d-none');
    document.getElementById('userEmailDisplay').textContent = currentUser;

    // Load saved data
    moodData = loadUserData(currentUser, 'moodData') || {};
    tasks = loadUserData(currentUser, 'tasks') || [];

    showView('dashboard');
    renderCalendar();
    renderTasks();
    renderMoodChart();
    renderMoodPieChart();

    // Reset login fields
    document.getElementById('loginForm').reset();
  }

  // Logout
  function logout() {
    // Save current data before logout
    if(currentUser) {
      saveUserData(currentUser, 'moodData', moodData);
      saveUserData(currentUser, 'tasks', tasks);
    }

    currentUser = null;
    document.getElementById('authView').classList.remove('hidden');
    document.getElementById('mainNav').classList.add('d-none');
    showView('authView');
  }

  // Mood Calendar code
  let currentMonth = new Date().getMonth();
  let currentYear = new Date().getFullYear();
  let moodData = {};

  function renderCalendar() {
    const now = new Date(currentYear, currentMonth);
    document.getElementById('monthYear').textContent = now.toLocaleDateString('en', { month: 'long', year: 'numeric' });
    const calendar = document.getElementById('calendar');
    calendar.innerHTML = '';
    const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
    for (let i = 1; i <= daysInMonth; i++) {
      const key = `${currentYear}-${currentMonth}-${i}`;
      const div = document.createElement('div');
      div.className = 'calendar-day';
      if (moodData[key]) div.classList.add(moodData[key]);
      div.textContent = i;
      div.onclick = () => setMood(i);
      calendar.appendChild(div);
    }
  }

  function prevMonth() {
    currentMonth--;
    if (currentMonth < 0) {
      currentMonth = 11;
      currentYear--;
    }
    renderCalendar();
  }

  function nextMonth() {
    currentMonth++;
    if (currentMonth > 11) {
      currentMonth = 0;
      currentYear++;
    }
    renderCalendar();
  }

  function setMood(day) {
    const mood = prompt('Enter mood (happy, sad, neutral):');
    if (mood && ['happy', 'sad', 'neutral'].includes(mood.toLowerCase())) {
      const key = `${currentYear}-${currentMonth}-${day}`;
      moodData[key] = mood.toLowerCase();
      saveUserData(currentUser, 'moodData', moodData);
      renderCalendar();
      renderMoodChart();
      renderMoodPieChart();
    }
  }

  // Task Noter code
  let tasks = [];

  function addTask() {
    const taskInput = document.getElementById('taskInput');
    if (taskInput.value.trim() === '') return;
    tasks.push({ text: taskInput.value.trim(), completed: false, date: new Date().toISOString() });
    taskInput.value = '';
    saveUserData(currentUser, 'tasks', tasks);
    renderTasks();
  }

  function renderTasks() {
    const taskList = document.getElementById('taskList');
    taskList.innerHTML = '';
    tasks.forEach((task, index) => {
      const li = document.createElement('li');
      li.className = 'list-group-item d-flex justify-content-between align-items-center';
      li.innerHTML = `
        <span class="${task.completed ? 'completed' : ''}">${task.text} (${new Date(task.date).toLocaleString()})</span>
        <div>
          <button class="btn btn-sm btn-outline-success me-1" onclick="toggleComplete(${index})">${task.completed ? 'Undo' : 'Complete'}</button>
          <button class="btn btn-sm btn-outline-primary me-1" onclick="editTask(${index})">Edit</button>
          <button class="btn btn-sm btn-outline-danger" onclick="deleteTask(${index})">Delete</button>
        </div>
      `;
      taskList.appendChild(li);
    });
  }

  function toggleComplete(index) {
    tasks[index].completed = !tasks[index].completed;
    saveUserData(currentUser, 'tasks', tasks);
    renderTasks();
  }

  function editTask(index) {
    const newText = prompt('Edit task:', tasks[index].text);
    if (newText) {
      tasks[index].text = newText.trim();
      saveUserData(currentUser, 'tasks', tasks);
      renderTasks();
    }
  }

  function deleteTask(index) {
    if (confirm('Are you sure you want to delete this task?')) {
      tasks.splice(index, 1);
      saveUserData(currentUser, 'tasks', tasks);
      renderTasks();
    }
  }

  function viewPastTasks() {
    const pastTasks = tasks.filter(task => new Date(task.date) < new Date(new Date().setDate(new Date().getDate() - 1)));
    if (pastTasks.length) {
      alert(pastTasks.map(t => `${t.text} (${new Date(t.date).toLocaleDateString()}) - ${t.completed ? 'Completed' : 'Pending'}`).join('\n'));
    } else {
      alert('No past tasks found.');
    }
  }

  // Mood Analytics Charts
  let moodLineChartInstance = null;
  let moodPieChartInstance = null;

  function renderMoodChart() {
    const ctx = document.getElementById('moodChart').getContext('2d');
    if (moodLineChartInstance) moodLineChartInstance.destroy();
    const labels = [];
    const scores = [];
    const last30Days = [...Array(30)].map((_, i) => {
      const date = new Date();
      date.setDate(date.getDate() - i);
      return date;
    }).reverse();

    last30Days.forEach(date => {
      const key = `${date.getFullYear()}-${date.getMonth()}-${date.getDate()}`;
      labels.push(date.toLocaleDateString());
      if (moodData[key]) {
        scores.push(moodData[key] === 'happy' ? 5 : moodData[key] === 'neutral' ? 3 : 1);
      } else {
        scores.push(0);
      }
    });

    moodLineChartInstance = new Chart(ctx, {
      type: 'line',
      data: {
        labels,
        datasets: [{
          label: 'Mood Score (1-5)',
          data: scores,
          borderColor: 'rgba(75, 192, 192, 1)',
          fill: false
        }]
      },
      options: { responsive: true, maintainAspectRatio: false }
    });
  }

  function renderMoodPieChart() {
    const ctx = document.getElementById('moodPieChart').getContext('2d');
    if (moodPieChartInstance) moodPieChartInstance.destroy();
    const moodCounts = { happy: 0, sad: 0, neutral: 0 };
    Object.values(moodData).forEach(mood => {
      if (mood in moodCounts) moodCounts[mood]++;
    });

    moodPieChartInstance = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: ['Happy', 'Sad', 'Neutral'],
        datasets: [{
          label: 'Mood Distribution',
          data: [moodCounts.happy, moodCounts.sad, moodCounts.neutral],
          backgroundColor: [
            'rgba(75, 192, 75, 0.6)',   // Happy - green
            'rgba(255, 99, 132, 0.6)',  // Sad - red
            'rgba(255, 206, 86, 0.6)'   // Neutral - yellow
          ],
          borderColor: [
            'rgba(75, 192, 75, 1)',
            'rgba(255, 99, 132, 1)',
            'rgba(255, 206, 86, 1)'
          ],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'top' },
          tooltip: { enabled: true }
        }
      }
    });
  }
  //sms remainder code
  
  // Meeting Reminder Form Handling
  const reminderForm = document.getElementById('reminderForm');
  const phoneInput = document.getElementById('phoneInput');
  const meetingTimeInput = document.getElementById('meetingTimeInput');
  const currentDate = new Date();

  reminderForm.addEventListener('submit', (e) => {
    e.preventDefault();

    const phone = phoneInput.value.trim();
    const time = meetingTimeInput.value.trim();

    if(!phone || !time){
      alert('Please enter valid phone number and meeting time');
      return;
    }

    const now = new Date();
    const [hours, minutes] = time.split(':').map(Number);
    const meetingDateTime = new Date(currentDate);
    meetingDateTime.setHours(hours, minutes, 0, 0);

    const delay = meetingDateTime.getTime() - now.getTime();
    if(delay < 0){
      alert('Meeting time is in the past. Reminder not set.');
      return;
    }

    fetch('http://localhost:3000/schedule-sms', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ phone, message: `Reminder: You have a meeting at ${time}`, delay }),
    })
      .then(res => res.json())
      .then(data => {
        if(data.success) alert('SMS reminder scheduled!');
        else alert('Failed to schedule SMS reminder.');
      }).catch(err => {
        console.error(err);
        alert('Error scheduling SMS reminder.');
      });
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>



